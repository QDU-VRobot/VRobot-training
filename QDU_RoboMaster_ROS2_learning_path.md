# 导航学习路线
哨兵作为RoboMaster比赛中不可缺少的一个兵种，因为是全自动无人操控兵种，因此哨兵的操作上限非常的高，为什么哨兵能够自己移动，精准避开障碍，在机器人众多的赛场来去自如，就和导航有关，导航是负责哨兵必须掌握的一部分，以下列出了导航的一些学习路线和心得


## 一、Linux命令
因为我们战队的所有代码以及ROS2是运行在Linux系统上的（具体为Ubuntu22.04系统），所以学习Linux的相关命令也是十分必要的
##### 强烈推荐此视频教程观看[Linux 之基于VSCode和CMake实现C/C++开发与调试 环境配置 GDB 多文件开发](https://www.bilibili.com/video/BV1fy4y1b7TC/),此教程将Linux环境下的VScode，Cmake，Linux命令等等全部解释清楚了，十分推荐，虽然时长比较长，但是长有长的好处
在此列出几个常用的Linux命令，其他命令什么时候用到什么时候再搜即可
- ```sudo```以超级管理员权限执行命令（十分常用）
- ```pwd```显示当前工作目录的路径
- ```ls```列出目录内容
- ```cd```切换目录
- ```tree```以树状图列出目录内容(需使用```sudo apt install tree```命令进行安装)
- ```mkdir```创建新的目录
- ```touch```创建空文件
- ```cp```复制文件或者目录
- ```mv```移动或重命名文件或者目录
- ```rm```删除文件或目录（不要尝试```sudo rm -rf /*``` !!!,每次都有好奇宝宝）
- ```nano```简单的文本编辑器
- ```vim```比较难但是功能强大的文本编辑器
- ```chmod```改变文件或者目录的权限（以后```sudo chmod /dev/ttyUSB*```的给串口权限的命令会非常常用）
- ```ping```测试与目标主机的网络连接
如果有命令不会的话，除了百度之外，还可以通过以下两个命令获取帮助
- ```--help```任何命令后面跟上```--help```或者```-h```都会显示该命令的帮助信息
- ```man```最权威的帮助手册，man后面跟上命令会列出该命令完整的用法，按Q退出
最后，如果你的命令输入正确的话，善用Tab键，会自动补全命令，十分的好用

## 二、ROS2
ROS 2（Robot Operating System 2） 是下一代机器人中间件。它并非一个传统的操作系统（如 Windows 或 Linux），而是一个运行在操作系统之上的元操作系统或框架。它提供了一系列软件库和工具，帮助开发者构建复杂的、分布式的机器人应用程序

简单来说，ROS 2是一个通信基础设施，它允许不同的软件组件（例如感知、规划、控制、决策）相互发现、通信和协作，无论它们是在同一台计算机上，还是在机器人内部网络或互联网上的不同计算机上

以上是官方对ROS2的解释，实际上，ROS2的存在是为了解决两个问题，第一是避免重复造轮子，第二是解决通信问题，这俩个我慢慢来解释
- 第一：避免重复造轮子，假设有一个机器人的项目，这个机器人有行走部分的框架，有视觉侦测的框架，有触摸感知的框架等等，你要造一台新的机器人，这个机器人有些框架是能继续使用上一个机器人的框架的，但是重新写一遍是不是非常麻烦，这是ROS2就派上用场了，用ROS2写的框架可以把每个部分完美的包装起来，留下对应的接口，这样我调用旧的框架或者别人调用我的框架只需要调用相应接口即可，不用再重复修改代码，修改框架
- 第二：通信问题，接第一个问题，假设机器人的视觉框架检测到前方有障碍物，它会返回障碍物的距离、大小等信息，那这些如何和机器人的行走框架相互通信控制机器人避开障碍物呢，是ROS2利用各种通信手段方便了各部分进行通信，免去了大部分通信难的问题，因为我们需要学习ROS2
  
### 以下是ROS2的主要学习部分
首先推荐B站UP主“鱼香ROS机器人”学习ROS2,非常厉害的ROS2教学UOP主，以下是他的B站空间和ROS2教学视频链接
[鱼香ROS机器人的B站主页空间](https://space.bilibili.com/1940177928)
[鱼香ROS的ROS2教学视频](https://www.bilibili.com/video/BV1GW42197Ck)

#### 1.安装ROS2
```wget http://fishros.com/install -O fishros && . fishros```
这个命令来自于鱼香ROS，一键安装ROS2以及配置环境，非常的方便，在之前安装与配置环境非常的麻烦，只需要运行这个命令，再跟随指引就能安装完成ROS2

#### 2.ROS2的四种通信
安装完ROS2之后需要学习ROS2，ROS2一共有四种通信方式：**话题通信**、**服务通信**、**动作通信**、**参数通信**，其中，最重要的是话题通信，参数通信次之，服务通信使用的很少，动作通信使用的相当相当少，只需要知道有这俩通信即可，不需要熟练掌握，前两者需要熟练掌握
这四种通信学习我建议通过上面说的鱼香ROS进行学习

#### 3.功能包、launch启动文件
在学习完以上四种通信之后，需要学习功能包、launch启动文件（这个估计你在学以上四种通信的时候会顺便学习到），这两个也可以在鱼香ROS那学习到，功能包是基础，launch启动文件也十分常用，你也不想启动节点的时候一个个输入```ros2 run```来启动吧。**如果你不打算负责导航，学习到这已经足以，以下的部分是想负责导航的才学习**

#### 4.TF变换

- tf变换，是坐标轴变换的意思,分为两种，**静态tf变换**，**动态tf变换**
- 静态tf变换有什么用呢，假设我们的机器人在场上看到了对方机器人，我们要计算两个机器人之间的距离，这个时候你只知道机器人底盘的坐标，但是我们要用弹丸打击对面，所以更精准的是通过云台枪口的坐标系来计算对方的距离，这个时候我们只需要告诉计算机，相对于底盘坐标轴，云台枪口的坐标在什么地方就可以了，这样计算机就能通过**底盘坐标轴—>云台枪口坐标—>对方机器人的坐标轴**的换算关系得出对面离我们的距离大小，从而更精准的打击对方。以上叫做静态tf变换，因为机器人无论如何移动，底盘和云台的相对坐标都是不变的，相应的，还有动态tf变换
- 动态tf变换，在场上，对方机器人的坐标相对于自己而言是不断变化的，有时近有时远，因此叫做动态tf变换

#### 5.URDF
- URDF是一种机器人的描述文件，它们使用XML语言来编写，通过URDF，可以描绘机器人各个部件之间的的连接与坐标关系，是的，通过这种方式，上面提到的静态tf变换就轻而易举的完成了。但URDF文件只是描述了这种变换关系，实际的静态tf变换是通过某个节点通过调用此URDF文件来发布的，比较常见的有ROS2自带的**robot_state_publisher**与**joint_state_publisher**,可以通过调用URDF文件来发布TF变换关系

- 此外，还有Xacro，它是基于XML的一种宏语言，用于简化URDF文件的创建和维护，使用它可以将部件等定义为宏，在需要时调用即可，我们更多时候是使用Xacro来创建和维护URDF

## 三、导航
假如你在某个陌生的地方，你要去这片地方的B点，而你在A点，你会怎么办呢，我觉得你应该会打开手机上的地图软件，然后搜索这个地方，地图会给你规划出路径，告诉你什么地方走多远，哪个地方转弯。对于一个全自动的机器人来说，其实也是这样的，首先你打开了地图软件是因为你要先知道这片地方的地图，从而才能规划路径，所以对于机器人来说，你首先要进行**建图**，然后你输入了你要去的地方，也就是B点，从而地图软件给出你如何走的路径，对于机器人来说，有了地图你要告诉它要去地图上哪个点，然后机器人的计算机会通过地图来计算出一条前往的路径，这其中利用的就是**Navigation2**导航框架。如果你从A点去往B点的路上，有一辆汽车挡住了你，你肯定要绕过去，对于机器人来说也是这样，若在移动的路上遇上了之前建图不存在的障碍物，它会自动避开，然后继续前往目标地点。最后，在你前往B点的时候，你会注意自己走了多远，从而得知自己应该在什么地方转弯，对于机器人来说，它也需要获知自己走了多远，而完成这一目标的是**里程计**。也就是说，想让机器人动起来，需要三个东西**建图**、**Navigation2**、**里程计**

- 建图，需要知道**SLAM**，SLAM的全称是Simultaneous Localization and Mapping，中文译为 “即时定位与地图构建” 或 “同步定位与建图”，它是通过传感器获取环境信息进行定位和建图。

- Navigation2，他是一种导航框架，通过导入建图所得地图，来规划机器人行走的路线

- 里程计（odom），它一般以机器人里程为0的地方为原点，然后记录机器人行驶里程，它在建图和导航方面都有十分重要的作用

以上的导航内容如果看不懂没关系，因为解释的比较粗浅，实际只是简单阐述了一些导航需要学习的内容来进行指引，等深入后可以慢慢学习

#### 总的来说，进入算法组，除了自瞄需要学习的OPENCV以外，Linux与ROS2也是一个重要的学习部分，对于想搞导航的同学，更需要好好学习，以上仅大体介绍与说明学习路线，加油
